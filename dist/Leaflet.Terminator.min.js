!function(a,b,c,d){"use strict";function e(a){return a/864e5+2440587.5}function f(a){var b=e(a),c=b-2451545;return(18.697374558+24.06570982441908*c)%24}a.Terminator=a.Polygon.extend({options:{color:"#00",opacity:.5,fillColor:"#00",fillOpacity:.5,resolution:2},initialize:function(b){this.VERSION="1.0.0",this._R2D=180/Math.PI,this._D2R=Math.PI/180,a.Util.setOptions(this,b);var c=this._compute(this.options.time||null);this.setLatLngs(c)},onAdd:function(b){a.Polygon.prototype.onAdd.call(this,b);var c=this;b.on("datetimechange",function(a){var b=a.datetime.split("T"),d=b[0].split("-"),e=b[1].split(":");b=new Date(Date.UTC(parseInt(d[0]),parseInt(d[1])-1,parseInt(d[2]),parseInt(e[0]),parseInt(e[1]),parseInt(e[2].replace("Z","")))),c.setTime(b)})},setTime:function(a){this.options.time=a;var b=this._compute(a||null);this.setLatLngs(b)},_sunEclipticPosition:function(a){var b=a-2451545,c=280.46+.9856474*b;c%=360;var d=357.528+.9856003*b;d%=360;var e=c+1.915*Math.sin(d*this._D2R)+.02*Math.sin(2*d*this._D2R),f=1.00014-.01671*Math.cos(d*this._D2R)-.0014*Math.cos(2*d*this._D2R);return{lambda:e,R:f}},_eclipticObliquity:function(a){var b=a-2451545,c=b/36525,d=23.43929111-c*(46.836769/3600-c*(1831e-7/3600+c*(5.565e-7-c*(1.6e-10-4.34e-8*c/3600))));return d},_sunEquatorialPosition:function(a,b){var c=Math.atan(Math.cos(b*this._D2R)*Math.tan(a*this._D2R))*this._R2D,d=Math.asin(Math.sin(b*this._D2R)*Math.sin(a*this._D2R))*this._R2D,e=90*Math.floor(a/90),f=90*Math.floor(c/90);return c+=e-f,{alpha:c,delta:d}},_hourAngle:function(a,b,c){var d=c+a/15;return 15*d-b.alpha},_latitude:function(a,b){var c=Math.atan(-Math.cos(a*this._D2R)/Math.tan(b.delta*this._D2R))*this._R2D;return c},_compute:function(a){for(var b,c,d,g=null===a?new Date:new Date(a),h=e(g),i=f(g),j=[],k=this._sunEclipticPosition(h),l=this._eclipticObliquity(h),m=this._sunEquatorialPosition(k.lambda,l),n=0;n<=720*this.options.resolution;n++)d=-360+n/this.options.resolution,b=this._hourAngle(d,m,i),c=this._latitude(b,m),j[n+1]=[c,d];return m.delta<0?(j[0]=[90,-360],j[j.length]=[90,360]):(j[0]=[-90,-360],j[j.length]=[-90,360]),j}}),a.terminator=function(b){return new a.Terminator(b)}}(L,this,document);